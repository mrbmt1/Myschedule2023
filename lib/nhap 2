// // Thêm import cho cloud_firestore và firebase_auth
// import 'package:cloud_firestore/cloud_firestore.dart';
// import 'package:firebase_auth/firebase_auth.dart';

// // Sửa hàm scheduleNotification()
// Future<void> scheduleNotification(
//     String content, DateTime scheduledDate) async {
//   // Kiểm tra nếu không bật thông báo thì không làm gì cả
//   if (!_isNotification) return;

//   // Lấy thông tin người dùng hiện tại
//   final FirebaseAuth auth = FirebaseAuth.instance;
//   final User? currentUser = auth.currentUser;
//   if (currentUser == null) return;
//   final String userId = currentUser.uid;

//   // Lấy dữ liệu của người dùng hiện tại từ Firebase
//   final DocumentSnapshot userSnapshot =
//       await FirebaseFirestore.instance.collection('users').doc(userId).get();

//   // Lấy thời gian thông báo và ngày đến hạn từ dữ liệu của người dùng
//   final int timeNotification = userSnapshot.get('timeNotification');
//   final Timestamp dueDateTimestamp = userSnapshot.get('dueDate');
//   final DateTime dueDate = dueDateTimestamp.toDate();

//   // Tính toán thời gian hiển thị thông báo
//   final DateTime notificationTime = DateTime(
//     scheduledDate.year,
//     scheduledDate.month,
//     scheduledDate.day,
//     _selectedTimeNotification.hour,
//     _selectedTimeNotification.minute,
//   ).subtract(Duration(minutes: timeNotification));

//   // Tạo cài đặt cho thông báo
//   final AndroidNotificationDetails androidPlatformChannelSpecifics =
//       AndroidNotificationDetails(
//           'todo_app_channel', 'Todo App', 'Channel for Todo App tasks',
//           importance: Importance.max,
//           priority: Priority.high,
//           ticker: 'ticker');
//   final NotificationDetails platformChannelSpecifics =
//       NotificationDetails(android: androidPlatformChannelSpecifics);

//   // Lập lịch hiển thị thông báo
//   await flutterLocalNotificationsPlugin.zonedSchedule(
//       0,
//       'Đến hạn task',
//       content,
//       tz.TZDateTime.from(notificationTime, tz.local),
//       platformChannelSpecifics,
//       androidAllowWhileIdle: true,
//       uiLocalNotificationDateInterpretation:
//           UILocalNotificationDateInterpretation.absoluteTime);
// }
