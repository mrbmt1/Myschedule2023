Để sửa lỗi "Unable to load asset" khi đổi ngôn ngữ, bạn cần tạo file json cho mỗi ngôn ngữ được hỗ trợ và đặt tên file theo mã ngôn ngữ tương ứng (ví dụ: "en.json" cho tiếng Anh, "vi.json" cho tiếng Việt). Sau đó, bạn cần đưa tên file json của ngôn ngữ được chọn vào phương thức loadString() trong file app_localizations.dart.

Để thực hiện chức năng đổi ngôn ngữ, bạn có thể sử dụng phương thức setString() của SharedPreferences để lưu mã ngôn ngữ được chọn vào bộ nhớ trong của ứng dụng. Sau đó, bạn cần gọi phương thức load() của AppLocalizations để nạp lại các chuỗi ngôn ngữ đã được cập nhật từ file json mới.

Dưới đây là các bước bạn có thể thực hiện để sửa lỗi và thêm chức năng đổi ngôn ngữ vào ứng dụng của bạn:

Tạo các file json cho các ngôn ngữ được hỗ trợ và đặt tên file theo mã ngôn ngữ tương ứng (ví dụ: "en.json" cho tiếng Anh, "vi.json" cho tiếng Việt).

Đưa tên file json của ngôn ngữ được chọn vào phương thức loadString() trong phương thức load() của AppLocalizations trong file app_localizations.dart.

Sử dụng phương thức setString() của SharedPreferences để lưu mã ngôn ngữ được chọn vào bộ nhớ trong của ứng dụng khi người dùng thay đổi ngôn ngữ.

Gọi phương thức load() của AppLocalizations để nạp lại các chuỗi ngôn ngữ đã được cập nhật từ file json mới.

Ví dụ, để lưu mã ngôn ngữ được chọn vào bộ nhớ trong của ứng dụng, bạn có thể sửa phương thức onChanged() của DropdownButton trong file setting như sau:

javascript
Copy code
DropdownButton<String>(
  value: 'Tiếng Việt',
  onChanged: (String? newValue) {
    SharedPreferences.getInstance().then((prefs) {
      prefs.setString('selectedLanguage', newValue ?? 'vi');
      AppLocalizations.of(context)!.load(Locale(newValue ?? 'vi'));
    });
  },
  items: <String>['Tiếng Việt', 'English']
      .map<DropdownMenuItem<String>>((String value) {
    return DropdownMenuItem<String>(
      value: value,
      child: Text(value),
    );
  }).toList(),
),
Lưu ý rằng, khi người dùng thay đổi ngôn ngữ, bạn cần gọi lại phương thức load() của AppLocalizations để nạp lại các chuỗi ngôn ngữ đã được cập nhật từ file json mới.// print(userId);
    print(_currentPassword);
    print(_newPassword);
    print(_confirmNewPassword);